<p-confirmDialog header="Confirmation"
                 icon="fa fa-question-circle" width="400">
</p-confirmDialog>
<div class="container">
  <div class="formRemoval" >
    <form  novalidate [formGroup]="allFormGroup[0]">
      <input type="hidden" formControlName="id">


      <mat-form-field hintLabel="Required">
        <input matInput
               formControlName="name"
               minlength="3"
               autocomplete="off"
               #input_name
               placeholder="name"
               required>
        <mat-icon matSuffix><fa-icon [icon]="['fas', 'user'] " size="xs"></fa-icon></mat-icon>
        <mat-error *ngIf="allFormGroup[0].get('name').invalid">Name is required and min 3 character</mat-error>
        <mat-hint align="end">min {{input_name.value?.length || 0}}/3</mat-hint>
      </mat-form-field>


      <mat-form-field >
        <input matInput
               formControlName="ref_client"
               minlength="3"
               autocomplete="off"
               #input_ref_client
               placeholder="ref_client">
        <mat-icon matSuffix><fa-icon [icon]="['fas', 'id-card'] " size="xs"></fa-icon></mat-icon>
        <mat-hint align="end">min {{input_ref_client.value?.length || 0}}/4</mat-hint>
      </mat-form-field>


      <app-address [formGroup]="allFormGroup[0]" [data]="clientZones"></app-address>

        <mat-form-field appearance="fill">
          <mat-label>Fill form field</mat-label>
          <input matInput
                 formControlName="phone"
                 autocomplete="off"
                 #input_phone
                 placeholder="phone">
          <mat-icon matSuffix><fa-icon [icon]="['fas', 'phone'] " size="xs"></fa-icon></mat-icon>
          <mat-hint>Hint</mat-hint>
        </mat-form-field>

      <input type="hidden" formControlName="fk_type">
      <input type="hidden" formControlName="active" value="1">
      <input type="hidden" formControlName="clientZone">
      <button  (click)="add(allFormGroup[0])"> add </button>
    </form>
  </div>
  <div class="formRemoval" *ngFor="let removal of allFormGroup | slice:1" let index="index" >
      <form  novalidate [formGroup]="removal" >
        <input type="hidden" formControlName="id" >
        <mat-form-field hintLabel="Required">
          <input matInput
                 formControlName="name"
                 minlength="3"
                 autocomplete="off"
                 #s_input_name
                 placeholder="name"
                 required>
          <mat-icon matSuffix><fa-icon [icon]="['fas', 'user'] " size="xs"></fa-icon></mat-icon>
          <mat-error *ngIf="allFormGroup[0].get('name').invalid">Name is required and min 3 character</mat-error>
          <mat-hint align="end">min {{s_input_name.value?.length || 0}}/3</mat-hint>
        </mat-form-field>
        <mat-form-field >
          <input matInput
                 formControlName="ref_client"
                 minlength="3"
                 autocomplete="off"
                 #s_input_ref_client
                 placeholder="ref_client">
          <mat-hint align="end">min {{s_input_ref_client.value?.length || 0}}/4</mat-hint>
        </mat-form-field>
        <app-address [formGroup]="removal" [data]="clientZones"></app-address>
        <mat-form-field appearance="fill">
          <mat-label>Fill form field</mat-label>
          <input matInput
                 formControlName="phone"
                 autocomplete="off"
                 placeholder="phone">
          <mat-icon matSuffix><fa-icon [icon]="['fas', 'phone'] " size="xs"></fa-icon></mat-icon>
          <mat-hint>Hint</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <input matInput
                 formControlName="created"
                 autocomplete="off"
                 placeholder="created">
          <mat-icon matSuffix><fa-icon [icon]="['fas', 'clock'] " size="xs"></fa-icon></mat-icon>
        </mat-form-field>

        <input type="hidden" formControlName="fk_type">
        <button [disabled]="!removal.dirty || !removal.valid  " (click)="update(removal)"> update </button>
        <button  (click)="delete(removal)"> {{removal.get('active').value==1 ? 'desactive' : 'active'}} </button>
      </form>
  </div>
</div>





