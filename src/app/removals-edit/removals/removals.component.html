<p-confirmDialog header="Confirmation"
                 icon="fa fa-question-circle" width="400">
</p-confirmDialog>
<div class="container">
  <div class="formRemoval" >
    <form  novalidate [formGroup]="allFormGroup[0]">

      <input type="hidden" formControlName="id">
      <input type="text" formControlName="name" autocomplete="off" placeholder="name">
      <input type="text" formControlName="ref_client" autocomplete="off" placeholder="ref_client">
      <input type="text" formControlName="address" placeholder="address">
      <input type="text" formControlName="number" placeholder="number">
      <!--<input type="number" formControlName="cp" placeholder="cp">-->
      <input type="text" formControlName="state" placeholder="state">
      <!-- directive input autocompletion -->
      <div class="pos-rel">
        <input (click)="toogleDropDown('cp')" type="number" formControlName="cp" autocomplete="off" placeholder="cp" >
        <div clickOutside  (clickOutside)="toogleDropDown('name')" *ngIf="showDropDown" class="state-container-dropdown">
          <div>
            <div (click)="setSelectdedValue('cp', d.cp)" class="state" *ngFor="let d of clientZones | clientCp:getSearchValue('cp');  let index=index">
              {{index}} {{d.cp}}
            </div>
          </div>
        </div>
      </div>
      <input type="text" formControlName="phone" placeholder="phone">
      <input type="hidden" formControlName="fk_type">
      <input type="hidden" formControlName="clientZone">
      <button  (click)="add(allFormGroup[0])"> add </button>

    </form>
  </div>
  <div class="formRemoval" *ngFor="let removal of allFormGroup | slice:1" let index="index" >
      <form  novalidate [formGroup]="removal" >
        <input type="hidden" formControlName="id" >
        <input type="text" formControlName="name" autocomplete="off" >
        <input type="text" formControlName="ref_client" autocomplete="off">
        <input type="text" formControlName="address">
        <input type="text" formControlName="number">
        <!-- directive input autocompletion -->
        <div class="pos-rel">
          <input (click)="toogleDropDown('cp')" type="number" formControlName="cp" autocomplete="off" placeholder="cp" >
          <div clickOutside  (clickOutside)="toogleDropDown('name')" *ngIf="showDropDown" class="state-container-dropdown">
            <div>
              <div (click)="setSelectdedValue('cp', d.cp)" class="state" *ngFor="let d of clientZones | clientCp:getSearchValue('cp');  let index=index">
                {{index}} {{d.cp}}
              </div>
            </div>
          </div>
        </div>
        <input type="text" formControlName="state">
        <input type="number" formControlName="clientZone">
        <input type="text" formControlName="phone">
        <input type="text" formControlName="created">
        <input type="hidden" formControlName="fk_type">
        <button [disabled]="!removal.dirty" (click)="update(removal)"> update </button>
        <button (click)="delete(removal)"> {{removal.get('active').value==1 ? 'desactive' : 'active'}} </button>
      </form>
  </div>
</div>




